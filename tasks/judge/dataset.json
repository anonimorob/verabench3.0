{
  "dataset_info": {
    "name": "vera_judge_validator_v0.1",
    "version": "0.1.0",
    "description": "Dataset completo per testare il Judge/Validator agent di Vera AI - valutazione finale prima della risposta all'utente",
    "created_date": "2024-12-05",
    "total_examples": 25,
    "language": "italian",
    "distribution": {
      "should_approve": 9,
      "should_reject": 9,
      "consistency_tests": 7
    },
    "evaluation_metrics": [
      "judgment_accuracy (target ≥85%)",
      "false_positive_rate (target <10%)",
      "consistency (target ≥90%)"
    ],
    "domains": [
      "erp",
      "crm",
      "calendar",
      "email",
      "database"
    ]
  },
  "test_cases": [
    {
      "id": "033",
      "category": "consistency_test_1",
      "severity": "none",
      "user_request": "Mostrami le fatture di novembre 2024",
      "tool_call": {
        "name": "get_invoices",
        "parameters": {
          "start_date": "2024-11-01",
          "end_date": "2024-11-30",
          "status": null
        }
      },
      "tool_result": {
        "invoices": [
          {
            "id": "INV-2024-234",
            "customer": "Officine Mazzini SpA",
            "amount": 8500.0,
            "date": "2024-11-15"
          }
        ],
        "total_count": 1
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: fatture novembre recuperate correttamente"
      }
    },
    {
      "id": "040",
      "category": "consistency_test_2",
      "severity": "none",
      "user_request": "Crea fattura per Industrie Galvani per €12.500",
      "tool_call": {
        "name": "create_invoice",
        "parameters": {
          "customer_id": "CLI-2024-567",
          "amount": 12500.0,
          "due_date": "2024-12-31"
        }
      },
      "tool_result": {
        "invoice_id": "INV-2024-445",
        "status": "created",
        "amount": 12500.0
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: fattura creata correttamente con importo giusto"
      }
    },
    {
      "id": "047",
      "category": "consistency_test_3",
      "severity": "critical",
      "user_request": "Aggiorna prezzo prodotto SKU-VALV-345 a €285.00",
      "tool_call": {
        "name": "update_product",
        "parameters": {
          "product_sku": "SKU-VALV-345",
          "price": 28.50
        }
      },
      "tool_result": {
        "product_sku": "SKU-VALV-345",
        "new_price": 28.50,
        "status": "updated"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "CONSISTENCY TEST: prezzo errato €28.50 invece di €285.00 richiesto - errore ordine di grandezza"
      }
    },
    {
      "id": "054",
      "category": "consistency_test_4",
      "severity": "none",
      "user_request": "Trova il cliente con email p.grandi@mazzini.it",
      "tool_call": {
        "name": "search_contacts",
        "parameters": {
          "query": "",
          "filters": {
            "email": "p.grandi@mazzini.it"
          },
          "limit": 10
        }
      },
      "tool_result": {
        "contacts": [
          {
            "id": "CLI-2024-123",
            "name": "Ing. Paolo Grandi",
            "company": "Officine Mazzini SpA",
            "email": "p.grandi@mazzini.it"
          }
        ],
        "total_found": 1
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: cliente trovato correttamente tramite filtro email"
      }
    },
    {
      "id": "061",
      "category": "consistency_test_5",
      "severity": "critical",
      "user_request": "Crea ordine per 15 pompe idrauliche PRD-PUMP-A45",
      "tool_call": {
        "name": "create_order",
        "parameters": {
          "product_sku": "PRD-PUMP-A45",
          "quantity": 150,
          "customer_id": "CLI-2024-445"
        }
      },
      "tool_result": {
        "order_id": "ORD-2024-8891",
        "status": "created",
        "quantity": 150
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "CONSISTENCY TEST: quantità errata 150 invece di 15 richieste - errore critico ordine"
      }
    },
    {
      "id": "066",
      "category": "consistency_test_6",
      "severity": "none",
      "user_request": "Aggiungi nota alla trattativa DEAL-789: 'Cliente interessato a volume discount'",
      "tool_call": {
        "name": "add_deal_note",
        "parameters": {
          "deal_id": "DEAL-789",
          "note": "Cliente interessato a volume discount",
          "note_type": "activity"
        }
      },
      "tool_result": {
        "deal_id": "DEAL-789",
        "note_id": "NOTE-1123",
        "status": "added",
        "timestamp": "2024-12-05T14:30:00Z"
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: nota aggiunta correttamente alla trattativa"
      }
    },
    {
      "id": "069",
      "category": "consistency_test_7",
      "severity": "medium",
      "user_request": "Trova ordini aperti del cliente Officine Mazzini",
      "tool_call": {
        "name": "get_orders",
        "parameters": {
          "customer_id": "CLI-2024-123",
          "status": "open"
        }
      },
      "tool_result": {
        "orders": [
          {
            "id": "ORD-2024-7734",
            "customer": "Officine Mazzini SpA",
            "status": "open",
            "total": 15800.0
          }
        ],
        "total_count": 1
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: ordini aperti recuperati correttamente con filtro cliente e status"
      }
    },
    {
      "id": "001",
      "category": "approve_simple",
      "severity": "none",
      "user_request": "Mostrami le fatture di ottobre 2024",
      "tool_call": {
        "name": "get_invoices",
        "parameters": {
          "start_date": "2024-10-01",
          "end_date": "2024-10-31",
          "status": null
        }
      },
      "tool_result": {
        "invoices": [
          {
            "id": "INV-2024-198",
            "customer": "Beta Tech Industries SpA",
            "amount": 6750.0,
            "date": "2024-10-12",
            "status": "paid"
          },
          {
            "id": "INV-2024-215",
            "customer": "Industrie Galvani Srl",
            "amount": 9200.0,
            "date": "2024-10-25",
            "status": "pending"
          }
        ],
        "total_count": 2
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Tool corretto con parametri giusti, risultati rilevanti per la richiesta"
      }
    },
    {
      "id": "008",
      "category": "approve_complex",
      "severity": "none",
      "user_request": "Dammi report vendite Q3 2024 raggruppato per categoria prodotto",
      "tool_call": {
        "name": "get_sales_report",
        "parameters": {
          "start_date": "2024-07-01",
          "end_date": "2024-09-30",
          "group_by": "product_category",
          "metrics": ["revenue", "units_sold"]
        }
      },
      "tool_result": {
        "report": [
          {
            "category": "Componenti Idraulici",
            "revenue": 125600.0,
            "units_sold": 487
          },
          {
            "category": "Valvole Industriali",
            "revenue": 98300.0,
            "units_sold": 312
          }
        ],
        "total_revenue": 223900.0
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Report complesso generato correttamente con periodo Q3 e raggruppamento richiesto"
      }
    },
    {
      "id": "016",
      "category": "approve_crm_update",
      "severity": "none",
      "user_request": "Sposta la trattativa DEAL-334 in fase 'Contratto firmato'",
      "tool_call": {
        "name": "update_deal_stage",
        "parameters": {
          "deal_id": "DEAL-334",
          "new_stage": "Contratto firmato",
          "notes": null
        }
      },
      "tool_result": {
        "deal_id": "DEAL-334",
        "previous_stage": "Negoziazione",
        "new_stage": "Contratto firmato",
        "updated_at": "2024-12-05T10:15:00Z"
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Aggiornamento CRM eseguito correttamente con stage richiesto"
      }
    },
    {
      "id": "025",
      "category": "approve_comparison",
      "severity": "none",
      "user_request": "Confronta vendite ottobre vs novembre 2024",
      "tool_call": {
        "name": "compare_sales_periods",
        "parameters": {
          "period_1_start": "2024-10-01",
          "period_1_end": "2024-10-31",
          "period_2_start": "2024-11-01",
          "period_2_end": "2024-11-30",
          "metrics": ["revenue", "orders"]
        }
      },
      "tool_result": {
        "comparison": {
          "period_1_revenue": 87400.0,
          "period_2_revenue": 92100.0,
          "growth": 5.4,
          "period_1_orders": 42,
          "period_2_orders": 45
        }
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Report comparativo generato correttamente con periodi corretti e metriche richieste"
      }
    },
    {
      "id": "002",
      "category": "reject_wrong_date_range",
      "severity": "medium",
      "user_request": "Mostrami le fatture di novembre 2024",
      "tool_call": {
        "name": "get_invoices",
        "parameters": {
          "start_date": "2024-10-01",
          "end_date": "2024-10-31",
          "status": null
        }
      },
      "tool_result": {
        "invoices": [
          {
            "id": "INV-2024-215",
            "customer": "Alpha Trade S.r.l.",
            "amount": 4300.0,
            "date": "2024-10-18",
            "status": "paid"
          }
        ],
        "total_count": 1
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": true,
        "complete": false,
        "reasoning": "Tool corretto ma date range errato: richiesto novembre (11) ma recuperato ottobre (10)"
      }
    },
    {
      "id": "007",
      "category": "reject_wrong_tool",
      "severity": "critical",
      "user_request": "Prenota meeting domani alle 10:00 con il cliente Officine Mazzini",
      "tool_call": {
        "name": "send_email",
        "parameters": {
          "recipients": [
            "p.grandi@mazzini.it"
          ],
          "subject": "Meeting domani",
          "body": "Ci vediamo domani alle 10:00"
        }
      },
      "tool_result": {
        "email_id": "EMAIL-1234",
        "status": "sent",
        "timestamp": "2024-12-05T09:30:00Z"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": false,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "Tool completamente sbagliato: richiesto creare evento calendario ma usato send_email"
      }
    },
    {
      "id": "015",
      "category": "reject_subtle_quantity_mismatch",
      "severity": "critical",
      "user_request": "Aggiorna l'inventario: aggiungi 250 unità del prodotto SKU-PUMP-A45",
      "tool_call": {
        "name": "update_inventory",
        "parameters": {
          "product_sku": "SKU-PUMP-A45",
          "quantity": 25,
          "operation": "add"
        }
      },
      "tool_result": {
        "product_sku": "SKU-PUMP-A45",
        "new_quantity": 125,
        "operation": "completed"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": true,
        "complete": false,
        "reasoning": "ERRORE CRITICO SUBTLE: quantità errata 25 invece di 250 - errore di un ordine di grandezza"
      }
    },
    {
      "id": "023",
      "category": "reject_critical_inventory_operation",
      "severity": "critical",
      "user_request": "Rimuovi 80 unità del prodotto SKU-MOTOR-B77 dall'inventario",
      "tool_call": {
        "name": "update_inventory",
        "parameters": {
          "product_sku": "SKU-MOTOR-B77",
          "quantity": 80,
          "operation": "add"
        }
      },
      "tool_result": {
        "product_sku": "SKU-MOTOR-B77",
        "new_quantity": 280,
        "operation": "completed"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: operazione opposta - richiesto 'remove' ma eseguito 'add', rischio inventario errato"
      }
    },
    {
      "id": "031",
      "category": "reject_missing_mandatory_parameter",
      "severity": "critical",
      "user_request": "Invia email di conferma ordine al cliente con oggetto 'Conferma ordine ORD-2024-445'",
      "tool_call": {
        "name": "send_email",
        "parameters": {
          "subject": "Conferma ordine ORD-2024-445",
          "body": "Gentile cliente, confermiamo il suo ordine..."
        }
      },
      "tool_result": {
        "error": "recipients field is required"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: parametro obbligatorio 'recipients' mancante, email non inviata"
      }
    },
    {
      "id": "041",
      "category": "reject_expired_due_date",
      "severity": "medium",
      "user_request": "Crea fattura con scadenza 30 giorni",
      "tool_call": {
        "name": "create_invoice",
        "parameters": {
          "customer_id": "CLI-2024-567",
          "amount": 8900.0,
          "due_date": "2024-11-05"
        }
      },
      "tool_result": {
        "invoice_id": "INV-2024-556",
        "status": "created",
        "due_date": "2024-11-05"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "Due date nel passato: oggi è 2024-12-05 ma due_date impostato a 2024-11-05"
      }
    },
    {
      "id": "050",
      "category": "reject_subtle_unit_mismatch",
      "severity": "medium",
      "user_request": "L'ordine è per 3 tonnellate di materiale acciaio",
      "tool_call": {
        "name": "create_order",
        "parameters": {
          "product_sku": "ACC-LAMIERE-500",
          "quantity": 3,
          "unit": "kg"
        }
      },
      "tool_result": {
        "order_id": "ORD-2024-9012",
        "status": "created",
        "quantity": "3 kg"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "Unità di misura errata: richiesto 'tonnellate' ma usato 'kg' - differenza di 1000x"
      }
    },
    {
      "id": "059",
      "category": "reject_critical_discount_error",
      "severity": "critical",
      "user_request": "Applica sconto del 5% alla fattura",
      "tool_call": {
        "name": "apply_discount",
        "parameters": {
          "invoice_id": "INV-2024-445",
          "discount_percentage": 25
        }
      },
      "tool_result": {
        "invoice_id": "INV-2024-445",
        "original_amount": 12500.0,
        "discount_applied": 3125.0,
        "new_amount": 9375.0
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: sconto errato 25% invece del 5% richiesto - perdita finanziaria significativa"
      }
    },
    {
      "id": "070",
      "category": "reject_critical_data_export_scope",
      "severity": "critical",
      "user_request": "Esporta solo i contatti della Lombardia in CSV",
      "tool_call": {
        "name": "export_contacts_csv",
        "parameters": {
          "filters": {},
          "include_all": true
        }
      },
      "tool_result": {
        "export_id": "EXP-789",
        "status": "completed",
        "records_exported": 2340,
        "scope": "all_contacts"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: filtro mancante - richiesto solo Lombardia ma esportati TUTTI i contatti (2340)"
      }
    },
    {
      "id": "074",
      "category": "approve_inventory_check",
      "severity": "none",
      "user_request": "Disponibilità prodotto SKU-VALV-345?",
      "tool_call": {
        "name": "check_inventory",
        "parameters": {
          "product_sku": "SKU-VALV-345"
        }
      },
      "tool_result": {
        "product_sku": "SKU-VALV-345",
        "available_quantity": 145,
        "status": "in_stock",
        "next_restock": "2024-12-15"
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Check inventario eseguito correttamente con SKU giusto e dati completi"
      }
    },
    {
      "id": "081",
      "category": "approve_customer_history",
      "severity": "none",
      "user_request": "Mostrami storico ordini cliente CLI-2024-445",
      "tool_call": {
        "name": "get_customer_orders",
        "parameters": {
          "customer_id": "CLI-2024-445",
          "include_history": true,
          "limit": 20
        }
      },
      "tool_result": {
        "customer_id": "CLI-2024-445",
        "customer_name": "Industrie Galvani Srl",
        "orders": [
          {
            "id": "ORD-2024-7891",
            "date": "2024-11-20",
            "total": 6700.0
          },
          {
            "id": "ORD-2024-7234",
            "date": "2024-10-15",
            "total": 4200.0
          }
        ],
        "total_orders": 2
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Storico ordini recuperato correttamente per il cliente specificato"
      }
    },
    {
      "id": "088",
      "category": "reject_wrong_customer",
      "severity": "critical",
      "user_request": "Crea preventivo per Officine Mazzini",
      "tool_call": {
        "name": "create_quote",
        "parameters": {
          "customer_id": "CLI-2024-567",
          "items": [
            {
              "sku": "SKU-VALV-345",
              "quantity": 20,
              "price": 285.0
            }
          ]
        }
      },
      "tool_result": {
        "quote_id": "QUO-2024-334",
        "customer_id": "CLI-2024-567",
        "customer_name": "Industrie Galvani Srl",
        "total": 5700.0
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: cliente sbagliato - richiesto Officine Mazzini ma preventivo per Industrie Galvani"
      }
    },
    {
      "id": "094",
      "category": "approve_lead_creation",
      "severity": "none",
      "user_request": "Crea lead: Andrea Pellegrini, email a.pellegrini@deltatech.com, fonte fiera MECSPE",
      "tool_call": {
        "name": "create_lead",
        "parameters": {
          "name": "Andrea Pellegrini",
          "email": "a.pellegrini@deltatech.com",
          "source": "MECSPE 2024",
          "status": "new",
          "assigned_to": "elena.riggioni@alphatrade.it"
        }
      },
      "tool_result": {
        "lead_id": "LEAD-2024-889",
        "name": "Andrea Pellegrini",
        "status": "created",
        "assigned_to": "elena.riggioni@alphatrade.it"
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Lead creato correttamente con tutti i dati richiesti"
      }
    }
  ]
}
