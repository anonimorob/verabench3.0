{
  "dataset_info": {
    "name": "vera_judge_validator_v0.1",
    "version": "0.1.0",
    "description": "Dataset completo per testare il Judge/Validator agent di Vera AI - valutazione finale prima della risposta all'utente",
    "created_date": "2025-11-12",
    "total_examples": 25,
    "language": "italian",
    "distribution": {
      "should_approve": 9,
      "should_reject": 9,
      "consistency_tests": 7
    },
    "evaluation_metrics": [
      "judgment_accuracy (target ≥85%)",
      "false_positive_rate (target <10%)",
      "consistency (target ≥90%)"
    ],
    "domains": [
      "erp",
      "crm",
      "calendar",
      "email",
      "database"
    ]
  },
  "test_cases": [
    {
      "id": "033",
      "category": "consistency_test_1",
      "severity": "none",
      "user_request": "Mostrami le fatture di settembre 2024",
      "tool_call": {
        "name": "get_invoices",
        "parameters": {
          "start_date": "2024-09-01",
          "end_date": "2024-09-30",
          "status": null
        }
      },
      "tool_result": {
        "invoices": [
          {
            "id": "INV-2024-140",
            "customer": "Gamma Inc.",
            "amount": 3200.0,
            "date": "2024-09-12"
          }
        ],
        "total_count": 1
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: fatture settembre recuperate correttamente"
      }
    },
    {
      "id": "040",
      "category": "consistency_test_2",
      "severity": "none",
      "user_request": "Crea fattura per Bianchi & Co. per €1500",
      "tool_call": {
        "name": "create_invoice",
        "parameters": {
          "customer_id": "CUST-456",
          "amount": 1500.0,
          "due_date": "2024-12-12"
        }
      },
      "tool_result": {
        "invoice_id": "INV-2024-220",
        "status": "created",
        "amount": 1500.0
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: fattura creata correttamente con importo giusto"
      }
    },
    {
      "id": "047",
      "category": "consistency_test_3",
      "severity": "critical",
      "user_request": "Aggiorna prezzo prodotto SKU-999 a €49.99",
      "tool_call": {
        "name": "update_product",
        "parameters": {
          "product_sku": "SKU-999",
          "price": 4.99
        }
      },
      "tool_result": {
        "product_sku": "SKU-999",
        "new_price": 4.99,
        "status": "updated"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "CONSISTENCY TEST: prezzo errato €4.99 invece di €49.99 richiesto"
      }
    },
    {
      "id": "054",
      "category": "consistency_test_4",
      "severity": "none",
      "user_request": "Trova il cliente con email info@verdi.it",
      "tool_call": {
        "name": "search_contacts",
        "parameters": {
          "query": "",
          "filters": {
            "email": "info@verdi.it"
          },
          "limit": 10
        }
      },
      "tool_result": {
        "contacts": [
          {
            "id": "CUST-555",
            "name": "Verdi S.p.A.",
            "email": "info@verdi.it"
          }
        ],
        "total_found": 1
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: cliente trovato correttamente tramite filtro email"
      }
    },
    {
      "id": "061",
      "category": "consistency_test_5",
      "severity": "critical",
      "user_request": "Crea ordine per 5 unità prodotto PRD-789",
      "tool_call": {
        "name": "create_order",
        "parameters": {
          "product_sku": "PRD-789",
          "quantity": 50,
          "customer_id": "CUST-234"
        }
      },
      "tool_result": {
        "order_id": "ORD-1001",
        "status": "created",
        "quantity": 50
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "CONSISTENCY TEST: quantità errata 50 invece di 5 richieste - errore critico ordine"
      }
    },
    {
      "id": "066",
      "category": "consistency_test_6",
      "severity": "none",
      "user_request": "Aggiungi nota alla trattativa DEAL-345: 'Cliente richiede demo tecnica'",
      "tool_call": {
        "name": "add_deal_note",
        "parameters": {
          "deal_id": "DEAL-345",
          "note": "Cliente richiede demo tecnica",
          "note_type": "activity"
        }
      },
      "tool_result": {
        "deal_id": "DEAL-345",
        "note_id": "NOTE-789",
        "status": "added",
        "timestamp": "2024-11-12T16:20:00Z"
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: nota aggiunta correttamente alla trattativa"
      }
    },
    {
      "id": "069",
      "category": "consistency_test_7",
      "severity": "medium",
      "user_request": "Trova ordini aperti del cliente Bianchi & Co.",
      "tool_call": {
        "name": "get_orders",
        "parameters": {
          "customer_id": "CUST-456",
          "status": "open"
        }
      },
      "tool_result": {
        "orders": [
          {
            "id": "ORD-890",
            "customer": "Bianchi & Co.",
            "status": "open",
            "total": 3400.0
          }
        ],
        "total_count": 1
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "CONSISTENCY TEST: ordini aperti recuperati correttamente con filtro cliente e status"
      }
    },
    {
      "id": "001",
      "category": "approve_simple",
      "severity": "none",
      "user_request": "Mostrami le fatture di ottobre 2024",
      "tool_call": {
        "name": "get_invoices",
        "parameters": {
          "start_date": "2024-10-01",
          "end_date": "2024-10-31",
          "status": null
        }
      },
      "tool_result": {
        "invoices": [
          {
            "id": "INV-2024-156",
            "customer": "Rossi S.r.l.",
            "amount": 1500.0,
            "date": "2024-10-15",
            "status": "paid"
          },
          {
            "id": "INV-2024-167",
            "customer": "Bianchi & Co.",
            "amount": 2300.0,
            "date": "2024-10-22",
            "status": "pending"
          }
        ],
        "total_count": 2
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Tool corretto, parametri temporali esatti, risultati pertinenti al periodo richiesto"
      }
    },
    {
      "id": "012",
      "category": "approve_multi_customer_search",
      "severity": "none",
      "user_request": "Trova tutti i clienti con 'Rossi' nel nome",
      "tool_call": {
        "name": "search_contacts",
        "parameters": {
          "query": "Rossi",
          "filters": {},
          "limit": 50
        }
      },
      "tool_result": {
        "contacts": [
          {
            "id": "CONT-101",
            "name": "Mario Rossi",
            "email": "mario@rossi.com"
          },
          {
            "id": "CONT-234",
            "name": "Rossi S.r.l.",
            "email": "info@rossisrl.it"
          },
          {
            "id": "CONT-567",
            "name": "Laura Rossi",
            "email": "l.rossi@example.com"
          }
        ],
        "total_found": 3
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Search corretto, tutti i risultati contengono 'Rossi' come richiesto"
      }
    },
    {
      "id": "020",
      "category": "approve_multi_filter_query",
      "severity": "none",
      "user_request": "Trova tutti i contatti della città di Milano con tag 'VIP'",
      "tool_call": {
        "name": "search_contacts",
        "parameters": {
          "query": "",
          "filters": {
            "city": "Milano",
            "tags": [
              "VIP"
            ]
          },
          "limit": 20
        }
      },
      "tool_result": {
        "contacts": [
          {
            "id": "CONT-890",
            "name": "Giuseppe Verdi",
            "city": "Milano",
            "tags": [
              "VIP",
              "Premium"
            ]
          },
          {
            "id": "CONT-891",
            "name": "Anna Ferrari",
            "city": "Milano",
            "tags": [
              "VIP"
            ]
          }
        ],
        "total_found": 2
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Filtri multipli applicati correttamente, risultati pertinenti (Milano + tag VIP)"
      }
    },
    {
      "id": "028",
      "category": "approve_get_customer_history",
      "severity": "none",
      "user_request": "Mostrami lo storico completo del cliente CUST-123",
      "tool_call": {
        "name": "get_customer_info",
        "parameters": {
          "customer_id": "CUST-123",
          "include_history": true
        }
      },
      "tool_result": {
        "customer": {
          "id": "CUST-123",
          "name": "Rossi S.r.l.",
          "history": {
            "total_orders": 15,
            "total_revenue": 23400.0,
            "last_order_date": "2024-11-01"
          }
        }
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Storico cliente recuperato correttamente con flag include_history=true"
      }
    },
    {
      "id": "037",
      "category": "approve_event_rescheduling",
      "severity": "none",
      "user_request": "Sposta l'evento CAL-8899 a giovedì 14 novembre alle 11:00",
      "tool_call": {
        "name": "update_event",
        "parameters": {
          "event_id": "CAL-8899",
          "updates": {
            "start_time": "2024-11-14T11:00:00Z",
            "end_time": "2024-11-14T12:00:00Z"
          }
        }
      },
      "tool_result": {
        "event_id": "CAL-8899",
        "status": "updated",
        "new_start": "2024-11-14T11:00:00Z"
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Evento spostato correttamente alla nuova data e ora richiesta"
      }
    },
    {
      "id": "046",
      "category": "approve_event_cancellation",
      "severity": "none",
      "user_request": "Cancella l'evento CAL-9901",
      "tool_call": {
        "name": "delete_event",
        "parameters": {
          "event_id": "CAL-9901",
          "send_notification": true
        }
      },
      "tool_result": {
        "event_id": "CAL-9901",
        "status": "cancelled",
        "notifications_sent": 3
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Evento cancellato correttamente con notifiche inviate ai partecipanti"
      }
    },
    {
      "id": "056",
      "category": "approve_product_stock_check",
      "severity": "none",
      "user_request": "Controlla giacenza prodotto SKU-445",
      "tool_call": {
        "name": "get_product_stock",
        "parameters": {
          "product_sku": "SKU-445"
        }
      },
      "tool_result": {
        "product_sku": "SKU-445",
        "current_stock": 87,
        "reserved": 12,
        "available": 75,
        "warehouse": "Milano-Central"
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Stock check eseguito correttamente con dettagli completi di giacenza"
      }
    },
    {
      "id": "065",
      "category": "approve_report_with_date_comparison",
      "severity": "none",
      "user_request": "Confronta vendite ottobre 2024 vs ottobre 2023",
      "tool_call": {
        "name": "get_comparative_sales_report",
        "parameters": {
          "period_1": {
            "start_date": "2024-10-01",
            "end_date": "2024-10-31"
          },
          "period_2": {
            "start_date": "2023-10-01",
            "end_date": "2023-10-31"
          },
          "metrics": [
            "revenue",
            "orders_count",
            "growth_percentage"
          ]
        }
      },
      "tool_result": {
        "comparison": {
          "period_1_revenue": 52300.0,
          "period_2_revenue": 48100.0,
          "growth": 8.7,
          "period_1_orders": 28,
          "period_2_orders": 25
        }
      },
      "ground_truth": {
        "should_approve": true,
        "appropriate_actions": true,
        "relevant_data": true,
        "coherent_response": true,
        "complete": true,
        "reasoning": "Report comparativo generato correttamente con periodi corretti e metriche richieste"
      }
    },
    {
      "id": "002",
      "category": "reject_wrong_date_range",
      "severity": "medium",
      "user_request": "Mostrami le fatture di ottobre 2024",
      "tool_call": {
        "name": "get_invoices",
        "parameters": {
          "start_date": "2024-09-01",
          "end_date": "2024-09-30",
          "status": null
        }
      },
      "tool_result": {
        "invoices": [
          {
            "id": "INV-2024-145",
            "customer": "Verdi S.p.A.",
            "amount": 890.0,
            "date": "2024-09-10",
            "status": "paid"
          }
        ],
        "total_count": 1
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": true,
        "complete": false,
        "reasoning": "Tool corretto ma date range errato: richiesto ottobre (10) ma recuperato settembre (09)"
      }
    },
    {
      "id": "007",
      "category": "reject_wrong_tool",
      "severity": "critical",
      "user_request": "Crea un evento in calendario per domani alle 14:00 con il cliente Rossi",
      "tool_call": {
        "name": "send_email",
        "parameters": {
          "recipients": [
            "rossi@example.com"
          ],
          "subject": "Riunione domani",
          "body": "Ci vediamo domani alle 14:00"
        }
      },
      "tool_result": {
        "email_id": "EMAIL-999",
        "status": "sent",
        "timestamp": "2024-11-12T10:30:00Z"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": false,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "Tool completamente sbagliato: richiesto creare evento calendario ma usato send_email"
      }
    },
    {
      "id": "015",
      "category": "reject_subtle_quantity_mismatch",
      "severity": "critical",
      "user_request": "Aggiorna l'inventario: aggiungi 100 unità del prodotto SKU-445",
      "tool_call": {
        "name": "update_inventory",
        "parameters": {
          "product_sku": "SKU-445",
          "quantity": 10,
          "operation": "add"
        }
      },
      "tool_result": {
        "product_sku": "SKU-445",
        "new_quantity": 110,
        "operation": "completed"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": true,
        "complete": false,
        "reasoning": "ERRORE CRITICO SUBTLE: quantità errata 10 invece di 100 - errore di un ordine di grandezza"
      }
    },
    {
      "id": "023",
      "category": "reject_critical_inventory_operation",
      "severity": "critical",
      "user_request": "Rimuovi 50 unità del prodotto SKU-789 dall'inventario",
      "tool_call": {
        "name": "update_inventory",
        "parameters": {
          "product_sku": "SKU-789",
          "quantity": 50,
          "operation": "add"
        }
      },
      "tool_result": {
        "product_sku": "SKU-789",
        "new_quantity": 150,
        "operation": "completed"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: operazione opposta - richiesto 'remove' ma eseguito 'add', rischio inventario errato"
      }
    },
    {
      "id": "031",
      "category": "reject_missing_mandatory_parameter",
      "severity": "critical",
      "user_request": "Invia email di follow-up al cliente con oggetto 'Proposta commerciale'",
      "tool_call": {
        "name": "send_email",
        "parameters": {
          "subject": "Proposta commerciale",
          "body": "Gentile cliente, in allegato la nostra proposta..."
        }
      },
      "tool_result": {
        "error": "recipients field is required"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: parametro obbligatorio 'recipients' mancante, email non inviata"
      }
    },
    {
      "id": "041",
      "category": "reject_expired_due_date",
      "severity": "medium",
      "user_request": "Crea fattura con scadenza 30 giorni",
      "tool_call": {
        "name": "create_invoice",
        "parameters": {
          "customer_id": "CUST-234",
          "amount": 2400.0,
          "due_date": "2024-10-15"
        }
      },
      "tool_result": {
        "invoice_id": "INV-2024-221",
        "status": "created",
        "due_date": "2024-10-15"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "Due date nel passato: oggi è 2024-11-12 ma due_date impostato a 2024-10-15"
      }
    },
    {
      "id": "050",
      "category": "reject_subtle_unit_mismatch",
      "severity": "medium",
      "user_request": "L'ordine è per 2 tonnellate di materiale",
      "tool_call": {
        "name": "create_order",
        "parameters": {
          "product_sku": "MAT-500",
          "quantity": 2,
          "unit": "kg"
        }
      },
      "tool_result": {
        "order_id": "ORD-999",
        "status": "created",
        "quantity": "2 kg"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "Unità di misura errata: richiesto 'tonnellate' ma usato 'kg' - differenza di 1000x"
      }
    },
    {
      "id": "059",
      "category": "reject_critical_discount_error",
      "severity": "critical",
      "user_request": "Applica sconto del 10% alla fattura",
      "tool_call": {
        "name": "apply_discount",
        "parameters": {
          "invoice_id": "INV-2024-200",
          "discount_percentage": 50
        }
      },
      "tool_result": {
        "invoice_id": "INV-2024-200",
        "original_amount": 2500.0,
        "discount_applied": 1250.0,
        "new_amount": 1250.0
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: sconto errato 50% invece del 10% richiesto - perdita finanziaria significativa"
      }
    },
    {
      "id": "070",
      "category": "reject_critical_data_export_scope",
      "severity": "critical",
      "user_request": "Esporta solo i contatti di Milano in CSV",
      "tool_call": {
        "name": "export_contacts_csv",
        "parameters": {
          "filters": {},
          "include_all": true
        }
      },
      "tool_result": {
        "export_id": "EXP-555",
        "status": "completed",
        "records_exported": 1250,
        "scope": "all_contacts"
      },
      "ground_truth": {
        "should_approve": false,
        "appropriate_actions": true,
        "relevant_data": false,
        "coherent_response": false,
        "complete": false,
        "reasoning": "ERRORE CRITICO: filtro mancante - richiesto solo Milano ma esportati TUTTI i contatti (1250)"
      }
    }
  ]
}